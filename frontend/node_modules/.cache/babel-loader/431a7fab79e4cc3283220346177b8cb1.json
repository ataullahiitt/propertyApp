{"ast":null,"code":"import _objectSpread from\"/home/ataullah/Explore/docker/node-project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/ataullah/Explore/docker/node-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{useForm}from\"react-hook-form\";import{APIURL}from'../constants/apiConstants';import{ButtonSpinner}from'../components/UI/Loader';import AuthContext from'../store/auth-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSending=_useState2[0],setIssending=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var navigate=useNavigate();var authCtx=useContext(AuthContext);var _useForm=useForm({mode:'onChange',defaultValues:{username:'',password:''}}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,isDirty=_useForm$formState.isDirty,isValid=_useForm$formState.isValid;var onSubmit=function onSubmit(data){setIssending(true);axios.post(APIURL.LOGIN,data).then(function(response){setIssending(false);authCtx.login(response.data);navigate('/transaction');}).catch(function(error){if(error.response.status===401){setError('Invalid Credentials');}else{setError('Something went wrong');}setIssending(false);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container py-5 h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-center align-items-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-8 col-lg-6 col-xl-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card shadow-2-strong\",style:{borderRadius:'1rem'},children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-5 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-5\",children:\"Sign in\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"form-outline mb-4\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({placeholder:\"Email\"},register(\"username\",{required:true,pattern:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i})),{},{type:\"email\",id:\"typeEmailX-2\",className:\"form-control form-control-lg\"}))}),/*#__PURE__*/_jsx(\"div\",{className:\"form-outline mb-4\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({placeholder:\"Password\"},register(\"password\",{required:true,minLength:5})),{},{type:\"password\",id:\"typePasswordX-2\",className:\"form-control form-control-lg\"}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check d-flex justify-content-start mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",value:\"\",id:\"form1Example3\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"form1Example3\",children:\" Remember password \"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",disabled:!isDirty||!isValid||isSending,type:\"submit\",children:[!isSending&&/*#__PURE__*/_jsx(_Fragment,{children:\"Login\"}),isSending&&/*#__PURE__*/_jsx(ButtonSpinner,{children:\"Logging...\"})]})]})})})})})});};export default Login;","map":{"version":3,"sources":["/home/ataullah/Explore/docker/node-project/client/src/pages/Login.jsx"],"names":["useState","useContext","useNavigate","axios","useForm","APIURL","ButtonSpinner","AuthContext","Login","isSending","setIssending","error","setError","navigate","authCtx","mode","defaultValues","username","password","register","handleSubmit","formState","isDirty","isValid","onSubmit","data","post","LOGIN","then","response","login","catch","status","borderRadius","required","pattern","minLength"],"mappings":"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","sourcesContent":["import { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport { APIURL } from '../constants/apiConstants';\nimport { ButtonSpinner } from '../components/UI/Loader';\nimport AuthContext from '../store/auth-context';\n\nconst Login = () => {\n\n    const [isSending, setIssending] = useState(false);\n    const [error, setError] = useState(null);\n    const navigate = useNavigate();\n    const authCtx = useContext(AuthContext);\n\n    const { register, handleSubmit, formState: { isDirty, isValid } } = useForm({\n        mode: 'onChange',\n        defaultValues: {\n            username: '',\n            password: ''\n        }\n    });\n\n    const onSubmit = (data) => {\n        setIssending(true);\n        axios.post(APIURL.LOGIN, data)\n            .then((response) => {\n                setIssending(false);\n                authCtx.login(response.data);\n                navigate('/transaction');\n            }).catch((error) => {\n                if (error.response.status === 401) {\n                    setError('Invalid Credentials');\n                } else {\n                    setError('Something went wrong');\n                }\n                setIssending(false);\n            });\n    }\n\n    return (\n\n        <div className=\"container py-5 h-100\">\n            <div className=\"row d-flex justify-content-center align-items-center h-100\">\n                <div className=\"col-12 col-md-8 col-lg-6 col-xl-5\">\n                    <div className=\"card shadow-2-strong\" style={{ borderRadius: '1rem' }}>\n\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            <div className=\"card-body p-5 text-center\">\n\n                                <h3 className=\"mb-5\">Sign in</h3>\n                                {error &&\n                                    <div className=\"alert alert-danger\" role=\"alert\">\n                                        {error}\n                                    </div>\n                                }\n                                <div className=\"form-outline mb-4\">\n                                    <input placeholder=\"Email\"\n                                        {...register(\"username\", { required: true, pattern: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i })}\n\n                                        type=\"email\"\n                                        id=\"typeEmailX-2\"\n                                        className=\"form-control form-control-lg\" />\n\n                                </div>\n\n                                <div className=\"form-outline mb-4\">\n                                    <input placeholder=\"Password\"\n                                        {...register(\"password\", { required: true, minLength: 5 })}\n                                        type=\"password\"\n                                        id=\"typePasswordX-2\"\n                                        className=\"form-control form-control-lg\" />\n                                </div>\n                                <div className=\"form-check d-flex justify-content-start mb-4\">\n                                    <input\n                                        className=\"form-check-input\"\n                                        type=\"checkbox\"\n                                        value=\"\"\n                                        id=\"form1Example3\"\n                                    />\n                                    <label className=\"form-check-label\" htmlFor=\"form1Example3\"> Remember password </label>\n                                </div>\n                                <button\n                                    className=\"btn btn-primary\"\n                                    disabled={!isDirty || !isValid || isSending}\n                                    type=\"submit\">\n                                    {!isSending && <>Login</>}\n                                    {isSending && <ButtonSpinner>Logging...</ButtonSpinner>}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}