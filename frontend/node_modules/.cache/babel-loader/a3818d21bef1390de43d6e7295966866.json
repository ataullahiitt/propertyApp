{"ast":null,"code":"import _objectSpread from\"/home/ataullah/Explore/docker/node-project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/ataullah/Explore/docker/node-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useContext,useState,useEffect}from\"react\";import{useForm}from'react-hook-form';import{useNavigate,useParams}from\"react-router-dom\";import{APIURL}from\"../constants/apiConstants\";import{ButtonSpinner}from\"../components/UI/Loader\";import PropertyContext from\"../store/property-context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PayRent=function PayRent(){var params=useParams();var propertyUUID=params.id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSaving=_useState2[0],setIsSaving=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDeleting=_useState4[0],setIsDeleting=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isNotEditing=_useState8[0],setIsNotEditing=_useState8[1];var navigate=useNavigate();var propertyCtx=useContext(PropertyContext);var _useForm=useForm({mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,_useForm$formState=_useForm.formState,isDirty=_useForm$formState.isDirty,isValid=_useForm$formState.isValid,errors=_useForm$formState.errors;var onSave=function onSave(frmData){if(isNotEditing)return;setIsSaving(true);setError(null);axios.put(\"\".concat(APIURL.PROPERTY+'/'+propertyUUID),frmData).then(function(response){setIsSaving(false);setIsNotEditing(true);navigate('/transaction');propertyCtx.onUpdate(propertyUUID,response.data.property);//console.log(\"response\", response.data);\n}).catch(function(error){setIsSaving(false);setError('Somthing went wrong , please try again');console.log(error);});};var enableEditHandler=function enableEditHandler(){setIsNotEditing(function(prevState){return!prevState;});};var onDeleteHandler=function onDeleteHandler(){if(window.confirm('Do you really want to delete this property?')){setIsDeleting(true);axios.delete(\"\".concat(APIURL.PROPERTY+'/'+propertyUUID)).then(function(response){setIsDeleting(false);propertyCtx.onDelete(propertyUUID);// console.log(response.data);\nnavigate('/transaction');}).catch(function(error){console.log(error);setIsDeleting(false);});}//navigate('/transaction');\n};useEffect(function(){var selectedProperty=propertyCtx.getProperty(propertyUUID);if(selectedProperty){setValue(\"bankAccountNumber\",selectedProperty.bankAccountNumber);setValue(\"IFSCcode\",selectedProperty.IFSCcode);setValue(\"address\",selectedProperty.address);setValue(\"bankAddress\",selectedProperty.bankAddress);setValue(\"bankName\",selectedProperty.bankName);setValue(\"landLoadFullName\",selectedProperty.landLoadFullName);setValue(\"mobileNumber\",selectedProperty.mobileNumber);setValue(\"name\",selectedProperty.name);setValue(\"paymentSchedule\",selectedProperty.paymentSchedule);setValue(\"rentAgreementDate\",selectedProperty.rentAgreementDate);setValue(\"rentAmount\",selectedProperty.rentAmount);setValue(\"type\",selectedProperty.type);}},[propertyUUID,propertyCtx.properties]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success\",children:\"Pay the Rent for the Month jan 2022\"})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit(onSave),children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Bank Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Bank Account Number\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",disabled:isNotEditing},register('bankAccountNumber',{required:true})),{},{className:\"form-control\"})),errors.bankAccountNumber&&errors.bankAccountNumber.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Bank Name\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",disabled:isNotEditing},register('bankName',{required:true})),{},{className:\"form-control\"})),errors.bankName&&errors.bankName.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"IFSC Code\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",disabled:isNotEditing},register('IFSCcode',{required:true})),{},{className:\"form-control\"})),errors.IFSCcode&&errors.IFSCcode.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Bank Address\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({disabled:isNotEditing},register('bankAddress',{required:true})),{},{className:\"form-control\",rows:\"2\"})),errors.bankAddress&&errors.bankAddress.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Payment Schedule\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",disabled:isNotEditing},register('paymentSchedule',{required:true})),{},{className:\"form-control\"})),errors.paymentSchedule&&errors.paymentSchedule.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Rent Amount\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",disabled:isNotEditing},register('rentAmount',{required:true})),{},{className:\"form-control\"})),errors.rentAmount&&errors.rentAmount.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Property Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Name(Label)\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",disabled:isNotEditing},register('name',{required:true})),{},{className:\"form-control\"})),errors.name&&errors.name.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Rent Agreement Date\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"date\",disabled:isNotEditing},register('rentAgreementDate',{required:true})),{},{className:\"form-control\"})),errors.rentAgreementDate&&errors.rentAgreementDate.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"State\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({disabled:isNotEditing,className:\"form-select\"},register('type',{required:true})),{},{children:[/*#__PURE__*/_jsx(\"option\",{children:\"Choose...\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Flat\"})]})),errors.type&&errors.type.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Land Load Full name\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",disabled:isNotEditing},register('landLoadFullName',{required:true})),{},{className:\"form-control\"})),errors.landLoadFullName&&errors.landLoadFullName.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Address\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({className:\"form-control\",disabled:isNotEditing},register('address',{required:true})),{},{rows:\"2\"})),errors.address&&errors.address.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Mobile Number\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",disabled:isNotEditing},register('mobileNumber',{required:true})),{},{className:\"form-control\"})),errors.name&&errors.name.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{className:\"error-msg\",children:\"This is required\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2 d-md-flex\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:enableEditHandler,type:\"button\",className:\"btn btn-secondary\",children:\"Edit\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary me-md-2\",type:\"submit\",disabled:isSaving,children:[!isSaving&&'Save',isSaving&&/*#__PURE__*/_jsx(ButtonSpinner,{children:\"Saving...\"})]}),/*#__PURE__*/_jsxs(\"button\",{disabled:isDeleting,type:\"button\",onClick:onDeleteHandler,className:\"btn btn-outline-danger\",children:[!isDeleting&&'Delete',isDeleting&&/*#__PURE__*/_jsx(ButtonSpinner,{children:\"Deleting...\"})]})]})})]})]})})]});};export default PayRent;","map":{"version":3,"sources":["/home/ataullah/Explore/docker/node-project/client/src/pages/PayRent.jsx"],"names":["axios","useContext","useState","useEffect","useForm","useNavigate","useParams","APIURL","ButtonSpinner","PropertyContext","PayRent","params","propertyUUID","id","isSaving","setIsSaving","isDeleting","setIsDeleting","error","setError","isNotEditing","setIsNotEditing","navigate","propertyCtx","mode","register","handleSubmit","setValue","formState","isDirty","isValid","errors","onSave","frmData","put","PROPERTY","then","response","onUpdate","data","property","catch","console","log","enableEditHandler","prevState","onDeleteHandler","window","confirm","delete","onDelete","selectedProperty","getProperty","bankAccountNumber","IFSCcode","address","bankAddress","bankName","landLoadFullName","mobileNumber","name","paymentSchedule","rentAgreementDate","rentAmount","type","properties","required"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { useContext, useState, useEffect } from \"react\";\nimport { useForm } from 'react-hook-form';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { APIURL } from \"../constants/apiConstants\";\nimport { ButtonSpinner } from \"../components/UI/Loader\";\nimport PropertyContext from \"../store/property-context\";\n\n\nconst PayRent = () => {\n\n    const params = useParams();\n    const propertyUUID = params.id;\n\n    const [isSaving, setIsSaving] = useState(false);\n    const [isDeleting, setIsDeleting] = useState(false);\n    const [error, setError] = useState(null);\n    const [isNotEditing, setIsNotEditing] = useState(true);\n\n    const navigate = useNavigate();\n    const propertyCtx = useContext(PropertyContext);\n\n    const { register, handleSubmit, setValue, formState: { isDirty, isValid, errors } } = useForm({\n        mode: 'onChange'\n    });\n\n    const onSave = (frmData) => {\n\n        if (isNotEditing)\n            return;\n        setIsSaving(true);\n        setError(null);\n\n        axios.put(`${APIURL.PROPERTY + '/' + propertyUUID}`, frmData)\n            .then((response) => {\n                setIsSaving(false);\n                setIsNotEditing(true);\n                navigate('/transaction');\n                propertyCtx.onUpdate(propertyUUID, response.data.property);\n                //console.log(\"response\", response.data);\n            })\n            .catch((error) => {\n                setIsSaving(false);\n                setError('Somthing went wrong , please try again');\n                console.log(error);\n            })\n    }\n\n    const enableEditHandler = () => {\n        setIsNotEditing(prevState => !prevState);\n    }\n\n    const onDeleteHandler = () => {\n\n        if (window.confirm('Do you really want to delete this property?')) {\n\n            setIsDeleting(true);\n\n            axios.delete(`${APIURL.PROPERTY + '/' + propertyUUID}`)\n                .then((response) => {\n                    setIsDeleting(false);\n                    propertyCtx.onDelete(propertyUUID);\n                    // console.log(response.data);\n                    navigate('/transaction');\n                }).catch((error) => {\n                    console.log(error);\n                    setIsDeleting(false);\n                })\n        }\n        //navigate('/transaction');\n    }\n\n    useEffect(() => {\n\n        const selectedProperty = propertyCtx.getProperty(propertyUUID);\n\n        if (selectedProperty) {\n            setValue(\"bankAccountNumber\", selectedProperty.bankAccountNumber);\n            setValue(\"IFSCcode\", selectedProperty.IFSCcode);\n            setValue(\"address\", selectedProperty.address);\n            setValue(\"bankAddress\", selectedProperty.bankAddress);\n            setValue(\"bankName\", selectedProperty.bankName);\n            setValue(\"landLoadFullName\", selectedProperty.landLoadFullName);\n            setValue(\"mobileNumber\", selectedProperty.mobileNumber);\n            setValue(\"name\", selectedProperty.name);\n            setValue(\"paymentSchedule\", selectedProperty.paymentSchedule);\n            setValue(\"rentAgreementDate\", selectedProperty.rentAgreementDate);\n            setValue(\"rentAmount\", selectedProperty.rentAmount);\n            setValue(\"type\", selectedProperty.type);\n        }\n    }, [propertyUUID, propertyCtx.properties]);\n\n    return (<>\n        <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\n            <button type=\"button\" className=\"btn btn-success\">Pay the Rent for the Month jan 2022</button>\n        </div>\n\n        {error && <div className=\"alert alert-danger\" role=\"alert\">\n            {error}\n        </div>}\n\n        <form onSubmit={handleSubmit(onSave)}>\n\n            <div className=\"row\">\n\n\n                <div className=\"col-md-4\">\n                    <h5>Bank Details</h5>\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Bank Account Number</label>\n                        <input type=\"text\" disabled={isNotEditing} {...register('bankAccountNumber', { required: true })} className=\"form-control\" />\n\n                        {errors.bankAccountNumber && errors.bankAccountNumber.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n\n                    </div>\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Bank Name</label>\n                        <input type=\"text\" disabled={isNotEditing} {...register('bankName', { required: true })} className=\"form-control\" />\n\n                        {errors.bankName && errors.bankName.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">IFSC Code</label>\n                        <input type=\"text\" disabled={isNotEditing} {...register('IFSCcode', { required: true })} className=\"form-control\" />\n                        {errors.IFSCcode && errors.IFSCcode.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Bank Address</label>\n                        <textarea disabled={isNotEditing} {...register('bankAddress', { required: true })} className=\"form-control\" rows=\"2\"></textarea>\n\n                        {errors.bankAddress && errors.bankAddress.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Payment Schedule</label>\n                        <input type=\"text\" disabled={isNotEditing} {...register('paymentSchedule', { required: true })} className=\"form-control\" />\n\n                        {errors.paymentSchedule && errors.paymentSchedule.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Rent Amount</label>\n                        <input type=\"text\" disabled={isNotEditing} {...register('rentAmount', { required: true })} className=\"form-control\" />\n\n                        {errors.rentAmount && errors.rentAmount.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n                </div>\n                <div className=\"col-md-4\">\n                    <h4>Property Details</h4>\n                    <div className=\"mb-3\">\n\n                        <label className=\"form-label\">Name(Label)</label>\n                        <input type=\"text\" disabled={isNotEditing} {...register('name', { required: true })} className=\"form-control\" />\n\n                        {errors.name && errors.name.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n\n                    </div>\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Rent Agreement Date</label>\n                        <input type=\"date\" disabled={isNotEditing} {...register('rentAgreementDate', { required: true })} className=\"form-control\" />\n\n                        {errors.rentAgreementDate && errors.rentAgreementDate.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">State</label>\n                        <select disabled={isNotEditing} className=\"form-select\" {...register('type', { required: true })}>\n                            <option>Choose...</option>\n                            <option>Flat</option>\n                        </select>\n                        {errors.type && errors.type.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Land Load Full name</label>\n                        <input type=\"text\" disabled={isNotEditing} {...register('landLoadFullName', { required: true })} className=\"form-control\" />\n\n                        {errors.landLoadFullName && errors.landLoadFullName.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Address</label>\n                        <textarea className=\"form-control\" disabled={isNotEditing} {...register('address', { required: true })} rows=\"2\"></textarea>\n                        {errors.address && errors.address.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n\n                    <div className=\"mb-3\">\n                        <label className=\"form-label\">Mobile Number</label>\n                        <input type=\"text\" disabled={isNotEditing} {...register('mobileNumber', { required: true })} className=\"form-control\" />\n                        {errors.name && errors.name.type === \"required\" && (\n                            <span className=\"error-msg\">This is required</span>\n                        )}\n                    </div>\n                    <div className=\"mb-3\">\n                        <div className=\"d-grid gap-2 d-md-flex\">\n                            <button onClick={enableEditHandler} type=\"button\" className=\"btn btn-secondary\">Edit</button>\n                            <button className=\"btn btn-primary me-md-2\" type=\"submit\" disabled={isSaving}>\n                                {!isSaving && 'Save'}\n                                {isSaving && <ButtonSpinner>Saving...</ButtonSpinner>}\n                            </button>\n                            <button disabled={isDeleting} type=\"button\" onClick={onDeleteHandler} className=\"btn btn-outline-danger\">\n                                {!isDeleting && 'Delete'}\n\n                                {isDeleting && <ButtonSpinner>Deleting...</ButtonSpinner>}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </>\n    )\n}\n\nexport default PayRent;"]},"metadata":{},"sourceType":"module"}